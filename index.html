<!doctype html>
<html>
	<head>
	<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
	<script type="text/javascript" src="https://d3js.org/d3.v3.min.js"></script>
	<script src='http://lorenzoongithub.github.io/completely/complete.ly.1.0.1.min.js'></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/7.1.0/bootstrap-slider.min.js"></script>
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/7.1.0/css/bootstrap-slider.min.css" />
  <link rel="stylesheet" type="text/css" href="style.css">
	</head>
	<body>
		<div class="container">
			<div class="row">
				<div class="col-md-6">
					<h1>Siteswap Suggest</h1>
					<h2>Autocomplete for siteswap prefixes</h2>
            				  <div class="alert alert-danger" id="successor">
           				       <span class='white-text flow-text'> You should probably go to
						       <a href="joshmermelstein.com/juggle-suggest2">../juggle-suggest2</a>
						       It's still in development but already does a bunch of things this version doesn't like
						       sync, suggestions in the middle of multiplexes, randomization, multicolored animation
						       and more.
						</span>
           				   </div>
              <hr/>
              <div id="input"></div>
              <hr/>
              <div class="alert alert-danger" id="error">
                  <span class='white-text flow-text'> '' </span>
              </div>

              <div class="btn-group" data-toggle="buttons" id="van-multi-toggle">
                <label class="btn btn-primary">
                  <input type="radio" name="options" id="vanilla" autocomplete="off"> Vanilla suggestions </label>
                <label class="btn btn-primary active">
                  <input type="radio" name="options" id="multiplex" autocomplete="off" checked="checked"> Multiplex suggestions </label>
              </div>

              <hr/>

              <span> Animation speed </span>
              <input id="animation_speed" type="text" data-slider-min="1" data-slider-max="30" data-slider-step="1" data-slider-value="3"/>

              <hr/>

              <svg class='stage'></svg>
			    </div>
			   <div id="juggle_container" class="col-md-6"></div>
			</div>
		</div>
    </body>
    <script src="suggest.js"></script>
    <script type="text/javascript" src="multiplex_anim.js"></script>
    <script src='graph.js'></script>
    <script type="text/javascript">
    window.onload = function () {
        // suggestbox init
        suggestbox = completely(document.getElementById('input'), {
            fontSize : '24px',
            fontFamily : 'Arial',
            color:'#933',
        });
        suggestbox.options = ['531'];
        suggestbox.repaint(); 
        function Update(txt) {
            UpdateSuggestion(txt);
            if(suggestbox.options.length > 0) {
      		    sswani.setSiteswap(suggestbox.options[0]);
      		    sswani.startAnimation();
                render(suggestbox.options[0]);
            } else {
                render(suggestbox.getText());
            }
        }
        suggestbox.onChange = Update
        setTimeout(function() {
            suggestbox.input.focus();
        },0);

        // animator init
        sswani = new SiteswapAnimator(document.getElementById("juggle_container"));
        sswani.setSiteswap("531", "20");
        sswani.setSiteswap(suggestbox.options[0]);
        sswani.startAnimation();
        render(suggestbox.options[0]);
        $(".btn-group > .btn").click(function(){
          $(this).addClass("active").siblings().removeClass("active");
        });
        $('input[type=radio]').click(function(){
          var txt = suggestbox.getText();
          Update(txt);
        });
        $("#animation_speed").slider({value: 20});
        $("#animation_speed").on("change", function(slideEvt) {
          var new_speed = ((30 - slideEvt.value.newValue));
          sswani.stopAnimation();
          sswani.speed = new_speed;
          sswani.startAnimation();
        });
    }
  </script>
</html>

